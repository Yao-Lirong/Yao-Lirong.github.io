<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"> <html><body> <p>谷歌和我网站有仇吗，弄了好几天，怎么别人等一天就行了，我等一个礼拜也搞不定。换了域名以后还不如原来，原来谷歌自动就给我 index 了。这样想还是要感谢营销号和爬虫，爬了我一个我自己都看不下去的题解，竟然让我原来的博客被收录了，可惜这个新的弄起来就麻烦了…</p> <p><span id="more"></span>&lt;h2 id="验证所有权"&gt;<a href="#%E9%AA%8C%E8%AF%81%E6%89%80%E6%9C%89%E6%9D%83" class="headerlink" title="验证所有权"></a>验证所有权&lt;/h2&gt;&lt;p&gt;首先我们需要验证网站所有权，选用 HTML tag 方式&lt;/p&gt;&lt;p&gt;在 Hexo - Archer 主题下找到 <code>layout - _partial - base-head.ejs</code> 中在 <code>&lt;head&gt;</code> tag 下添加需要的验证 tag&lt;/p&gt;&lt;p&gt;对于不同的主题，一个快速找到 <code>&lt;head&gt;</code> 在哪里生成的方法就是直接查找 <code>&lt;head&gt;</code> tag&lt;/p&gt;&lt;h2 id="本地插件生成必要文件"&gt;<a href="#%E6%9C%AC%E5%9C%B0%E6%8F%92%E4%BB%B6%E7%94%9F%E6%88%90%E5%BF%85%E8%A6%81%E6%96%87%E4%BB%B6" class="headerlink" title="本地插件生成必要文件"></a>本地插件生成必要文件&lt;/h2&gt;&lt;p&gt;使用 <code>npm install &lt;name&gt; --save</code> 安装以下几个插件: &lt;/p&gt;&lt;ul&gt;&lt;li&gt;<code>hexo-generator-robotstxt</code>&lt;/li&gt;&lt;li&gt;<code>hexo-generator-sitemap</code>&lt;/li&gt;&lt;li&gt;<code>hexo-generator-baidu-sitemap</code>&lt;/li&gt;&lt;li&gt;<code>hexo-autonofollow</code>&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;Add the following plugin’s settings to root directory <code>_config.yml</code>:&lt;/p&gt;<figure class="highlight yaml">&lt;table&gt;&lt;tr&gt;&lt;td class="gutter"&gt;&lt;pre&gt;<span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br>&lt;/pre&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;pre&gt;<span class="line"><span class="attr">sitemap:</span></span><br><span class="line"> <span class="attr">path:</span> <span class="string">sitemap.xml</span></span><br><span class="line"><span class="attr">baidusitemap:</span></span><br><span class="line"> <span class="attr">path:</span> <span class="string">baidusitemap.xml</span></span><br><span class="line"></span><br><span class="line"><span class="attr">robotstxt:</span></span><br><span class="line"> <span class="attr">useragent:</span> <span class="string">"*"</span></span><br><span class="line"> <span class="attr">disallow:</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">/assets/</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">/css/</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">/avatar/</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">/scripts/</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">/font/</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">/lib/</span></span><br><span class="line"> <span class="attr">allow:</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">/</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">/archives/</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">/categories/</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">/tags/</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">/about/</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">/page/</span> </span><br><span class="line"> <span class="attr">sitemap:</span> </span><br><span class="line"> <span class="bullet">-</span> <span class="string">https://yao-lirong.github.io/sitemap.xml</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">https://yao-lirong.github.io/baidusitemap.xml</span></span><br><span class="line"></span><br><span class="line"><span class="attr">nofollow:</span></span><br><span class="line"> <span class="attr">enable:</span> <span class="literal">true</span></span><br>&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</figure>&lt;h2 id="Google"&gt;<a href="#Google" class="headerlink" title="Google"></a>Google&lt;/h2&gt;&lt;p&gt;有些时候如果不进行这些所谓『优化』，你只能等有人链接到你的页面谷歌才会收录，所以这些优化实际上是必要的。&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;p&gt;Canonical Tag 优化: 和前文一样，找到在 <code>&lt;head&gt;</code> tag 中对应位置，添加以下代码&lt;/p&gt;<figure class="highlight html">&lt;table&gt;&lt;tr&gt;&lt;td class="gutter"&gt;&lt;pre&gt;<span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br>&lt;/pre&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;pre&gt;<span class="line">&lt;% </span><br><span class="line"> var base_url = config.url;</span><br><span class="line"> if (config.url.charAt(config.url.length - 1) !== '/') base_url += '/';</span><br><span class="line"> var canonical_url = base_url + page.canonical_path.replace('index.html', '');</span><br><span class="line">%&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"canonical"</span> <span class="attr">href</span>=<span class="string">"&lt;%= canonical_url %&gt;"</span>&gt;</span></span><br>&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</figure>&lt;/li&gt;&lt;li&gt;&lt;p&gt;<a href="https://developers.google.com/search/docs/advanced/sitemaps/build-sitemap#addsitemap" rel="external nofollow noopener" target="_blank">提交 sitemap.xml</a>: 首先从 <a href="https://search.google.com/search-console/sitemaps" rel="external nofollow noopener" target="_blank">Search Console</a> 中提交，在通过 <a href="https://www.google.com/ping?sitemap=https://yao-lirong.github.io/sitemap.xml" rel="external nofollow noopener" target="_blank">ping</a> 提交上双保险&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;<a href="https://developers.google.com/search/docs/advanced/robots/create-robots-txt#submit" rel="external nofollow noopener" target="_blank">提交 robots.txt</a>: 从<a href="https://www.google.com/webmasters/tools/robots-testing-tool" rel="external nofollow noopener" target="_blank">这里</a>可以提交并看到谷歌最新抓取到的 <code>robots.txt</code>&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;提交了这些东西以后需要等好久，这时为了确认我们网站啥的确实没问题，心理求个安慰，使用 URL Inspection in Search Console, or directly at this link <code>https://search.google.com/search-console/inspect?resource_id=&lt;url you want to check rn&gt;</code>. &lt;/p&gt;&lt;p&gt;如果显示”URL is not on Google”，选择 “TEST LIVE URL”, 只要我们看到 “URL is available to Google” 以及 “User-declared canonical” 这一栏确实是本文网址一般就没问题。&lt;/p&gt;&lt;p&gt;此时，为了加快 index 进程，我们可以 “Request Indexing” 虽然只有这一个 page，但芝麻肉也是肉…&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;h2 id="Google-Sitemap-的问题"&gt;<a href="#Google-Sitemap-%E7%9A%84%E9%97%AE%E9%A2%98" class="headerlink" title="Google Sitemap 的问题"></a>Google Sitemap 的问题&lt;/h2&gt;&lt;p&gt;上面用了 URL inspection tool 全是因为老显示我 sitemap couldn’t fetch. 查询了一下能做的只有等待… &lt;/p&gt;&lt;p&gt;<a href="https://support.google.com/webmasters/thread/3864297/trying-to-submit-sitemap-and-it-says-couldn-t-fetch" rel="external nofollow noopener" target="_blank">谷歌工作人员的回复</a>, <a href="https://betterstudio.com/blog/search-console-fails-to-fetch-sitemap/" rel="external nofollow noopener" target="_blank">一个描述问题比较全的网站</a>&lt;/p&gt;&lt;h2 id="Reference"&gt;<a href="#Reference" class="headerlink" title="Reference"></a>Reference&lt;/h2&gt;&lt;ol&gt;&lt;li&gt;<a href="https://summerandwinter.github.io/hexo-optimize-seo.html" rel="external nofollow noopener" target="_blank">Hexo搜索引擎优化</a>: 大部分有用的 Google SEO 优化步骤都来自这里&lt;/li&gt;&lt;li&gt;<a href="https://ahrefs.com/blog/google-index/" rel="external nofollow noopener" target="_blank">Get Google to Index Your Site</a>: 以及国外的一个比较全的 Google 排雷网站&lt;/li&gt;&lt;/ol&gt;</p> </body></html>