<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"> <html><body> <p><span id="more"></span>&lt;h2 id="Tutorial"&gt;<a href="#Tutorial" class="headerlink" title="Tutorial"></a>Tutorial&lt;/h2&gt;&lt;ol&gt;&lt;li&gt;&lt;p&gt;Install Aria2c: <code>sudo apt install aria2c</code>&lt;/p&gt;&lt;p&gt;and a web-based GUI: <a href="https://github.com/mayswind/AriaNg/" rel="external nofollow noopener" target="_blank">AriaNg</a>&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Create configuration files:&lt;/p&gt;<figure class="highlight bash">&lt;table&gt;&lt;tr&gt;&lt;td class="gutter"&gt;&lt;pre&gt;<span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br>&lt;/pre&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;pre&gt;<span class="line">mkdir ~/.aria2</span><br><span class="line">touch ~/.aria2/aria2.session <span class="comment">#用于保存日志</span></span><br><span class="line">touch ~/.aria2/aria2.conf <span class="comment">#创建配置文件</span></span><br>&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</figure>&lt;p&gt;A template for “aria2.conf” can be downloaded from <a href="http://aria2c.com/archiver/aria2.conf" rel="external nofollow noopener" target="_blank">aria2c.com</a>. You should change the <code>dir</code> field to be download path, change <code>input-file</code> and <code>save-session</code> to be the path of <code>aria2.session</code>. <code>aria2.conf</code> doesn’t support environment variable, so everything is at best written in absolute path.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Run Aria2c with this configuration: <code>aria2c --conf-path=/home/&lt;username&gt;/.aria2/aria2.conf</code>. It will remember this as its configuration file and use it to start the service from now on. We can also add argument <code>-D</code> so Aria2c runs as daemon in the background. (Since the aria2c’s default configure file path is in <code>~/.aria2/</code>, we don’t really need the <code>--conf-path</code> argument; but use it to specify a conf path if you put it somewhere else)&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;设置 <code>aria2c</code> 开机自动启动：编写脚本 <code>myStartUp.sh</code> 并放入 <code>/etc/init.d/</code>. (Remember to change its privilege to everyone)&lt;/p&gt;<figure class="highlight sh">&lt;table&gt;&lt;tr&gt;&lt;td class="gutter"&gt;&lt;pre&gt;<span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br>&lt;/pre&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;pre&gt;<span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Short-Description: My Startup Services</span></span><br><span class="line"></span><br><span class="line">aria2c -D –conf-path=/home/&lt;username&gt;/.aria2/aria2.conf</span><br>&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</figure>&lt;p&gt;More on Start Service on WSL startup, refer to this <a href="https://zhuanlan.zhihu.com/p/47733615" rel="external nofollow noopener" target="_blank">answer</a>&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;h2 id="Caution"&gt;<a href="#Caution" class="headerlink" title="Caution"></a>Caution&lt;/h2&gt;&lt;p&gt;On WSL, when you start <code>aria2</code> service the first time, note: (full command means the above command with <code>--conf-path</code>, but since our conf path is the same as default path, we can take )&lt;/p&gt;&lt;ol&gt;&lt;li&gt;use the full command <code>aria2c --conf-path=/home/&lt;username&gt;/.aria2/aria2.conf</code> and don’t start it in the background with <code>-D</code>. &lt;/li&gt;&lt;li&gt;start it immediately after Windows is booted, before you open anything else or tweak anything &lt;/li&gt;&lt;/ol&gt;&lt;p&gt;Anything else than this full command or use this full command some time after Windows boot could cause problem. The problem is showing “Exception: [SocketCore.cc:312] errorCode=1 Failed to bind a socket, cause: Permission denied” even though no process is using port 6800. The reason for this problem is not clear.&lt;/p&gt;&lt;p&gt;After staring <code>aria2</code> once with the full command, we can shut it down and then start it in the background with <code>aria2c -D --conf-path=/home/&lt;username&gt;/.config/aria2/aria2.conf</code>. Now everything will work fine. &lt;/p&gt;&lt;h2 id="Reference"&gt;<a href="#Reference" class="headerlink" title="Reference"></a>Reference&lt;/h2&gt;&lt;ol&gt;&lt;li&gt;<a href="https://www.cnblogs.com/zhuxiaoxi/p/7714457.html" rel="external nofollow noopener" target="_blank">Linux中配置Aria2 RPC Server</a>&lt;/li&gt;&lt;li&gt;<a href="https://www.cnblogs.com/ssooking/p/6094740.html" rel="external nofollow noopener" target="_blank">linux设置开机自启动</a>&lt;/li&gt;&lt;li&gt;<a href="https://zhuanlan.zhihu.com/p/47733615" rel="external nofollow noopener" target="_blank">WSL 服务自动启动的正确方法</a>&lt;/li&gt;&lt;/ol&gt;</p> </body></html>